/*! jqm-multislider (C)Armin Junge 03-05-2018 */

$.widget("vertumnus.multislider",{options:{min:0,max:100,step:1,showValue:!0},_create:function(){let e=this.element.attr("min"),t=this.element.attr("max"),s=this.element.attr("step"),i=this.element.attr("data-show-value");void 0!==e&&(this.options.min=parseInt(e)),void 0!==t&&(this.options.max=parseInt(t)),void 0!==s&&(this.options.step=parseInt(s)),void 0!==i&&(this.options.showValue="true"===i),this.element.addClass("ui-rangeslider"),this._label=this.element.find("label").first().insertBefore(this.element),this._sliderContainer=$('<div class="ui-rangeslider-sliders" />').prependTo(this.element),this._sliders=[];let n=this;this.element.find("input").each(function(e){n._newSlider($(this),e)}).change({widget:this},this._change).parent().hide(),this._initSliders()},_setOption:function(e,t){switch(e){case"showValue":if("boolean"!=typeof t)return!1;this._showValue(t)}this._super(e,t)},_change:function(e){my=e.data.widget;let t=$(e.target),s=parseInt(t.attr("pos")),i=parseInt(s>0?my._sliders[s-1].slider.val():my.options.min),n=parseInt(s<my._sliders.length-1?my._sliders[s+1].slider.val():my.options.max+1),l=parseInt(t.val());l<=i&&t.val(i+my.options.step).slider("refresh"),l>=n&&t.val(n-my.options.step).slider("refresh"),my.options.showValue&&my._sliderContainer.find(`a[pos=${s}]`).html(t.val())},_newSlider:function(e,t){let s=e.attr({min:this.options.min,max:this.options.max,step:this.options.step,"data-show-value":this.options.showValue,pos:t}).slider(),i=$.data(s[0],"mobile-slider");return i.slider.appendTo(this._sliderContainer),i.handle.attr({pos:t}),this._sliders.push({slider:s,handle:i.handle}),s},_initSliders:function(){let e=(this.options.max-this.options.min)/(this._sliders.length+1),t=parseInt(this.options.min);this._sliders.forEach(function(s){s.slider.val(Math.round(t+=e)).slider("refresh"),this.options.showValue&&s.handle.html(s.slider.val())},this)},_showValue:function(e){this._sliders.forEach(function(t){t.handle.html(e?t.slider.val():"")})},values:function(){return this._sliders.map(e=>parseInt(e.slider.val()))},value:function(e,t){return e<0||e>=this._sliders.length?null:void 0===t?parseInt(this._sliders[e].slider.val()):(this._sliders[e].slider.val(t).change(),this)},count:function(){return this._sliders.length},increase:function(){this._newSlider($('<input type="range" />').appendTo(this.element),this._sliders.length).change({widget:this},this._change).parent().hide(),this._initSliders()},decrease:function(){this._sliders.pop(),this.element.find(".ui-slider-track:last").remove(),this.element.find("input:last").slider("destroy").remove(),this._initSliders()}});